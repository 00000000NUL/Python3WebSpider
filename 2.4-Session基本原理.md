# Session和Cookies基本原理

我们可以将最简单的HTML页面放在某台具有固定公网IP的主机上，主机上装有Apache或Nginx，这样这台主机就可以作为服务器，其他人便可以通过访问服务器看到这个页面了，

这种网页的内容是HTML代码编写的，文字、图片等内容均是通过HTML代码来渲染出来的，这种页面叫做静态页面，其页面加载速度快，但是存在很大的缺陷，如可维护性差，不能根据URL灵活多变地显示页面。

所以动态网页应运而生，它可以动态解析URL中参数的变化，关联数据库并动态地呈现不同的页面内容，非常灵活多变。

对于大多数网站来说，动态网站还具有用户登录注册的功能，很多页面是需要登录之后才可以查看的，按照一般的逻辑来说，我们输入用户名密码登录之后，肯定是拿到了一种类似凭证的东西，有了它我们才能保持登录状态，才能访问登录之后才能看到的页面。

那么这种神秘的凭证到底是什么呢？其实它就是Session和Cookies共同产生的结果，下面我们来一探它们的究竟。

## 无状态HTTP

在了解Session和Cookies之前，我们首先来了解HTTP的一个特点，叫做无状态。

HTTP的无状态是指HTTP协议对事务处理是没有记忆能力的，也就是说服务器不知道客户端是什么状态。当我们向服务器发送一个Requset，服务器解析Request，返回对应的Response，它只负责这件事情，而且这个过程是完全独立的，不会记录前后状态的变化，也就是缺少状态，这意味着如果后续处理需要前面的信息，则它必须要重传，这也导致了需要额外传递一些前面的重复Request才能获取后续Response，然而这种效果显然不是我们想要的。为了保持前后状态，我们肯定不能将前面的请求全部重传一次，这太浪费资源了，对于这种需要用户登录的页面来说，更是棘手。

所以，这时候，两个用于保持HTTP连接状态的技术就出现了，它们分别是Session和Cookies，Session在服务端，也就是网站的服务器，用来保存用户的会话信息，Cookies在客户端，也可以理解为浏览器端，有了Cookies，浏览器在下次访问网页时会自动附带上它发送给服务器，服务器通过识别Cookies并鉴定用户是否是登录状态，然后返回对应的Response。可以理解为Cookies里面保存了登录的凭证，有了它我们只需要在下次请求携带Cookies发送Request而不必重新输入用户名、密码等信息重新登录了。所以有时候处理需要登录才能访问的页面时，我们一般会直接将登录成功后获取的Cookies放在Request Headers里面直接请求，而不必重新模拟登录了。

好，大体了解什么是Session和Cookies之后，我们来详细剖析一下它们的原理。

## Session

即我们给服务器发送 HTTP 请求之后，服务器根据请求，会给我们发送数据过来，但是，发送完，不会记录任何信息。

## Session

在Web世界，我们经常会听说有Session和Cookie，它们俩的出现