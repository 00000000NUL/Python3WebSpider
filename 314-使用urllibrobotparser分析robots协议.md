### 使用urllib.robotparser分析robots协议

#### 什么是robots协议

要了解`urllib.robotparser`这个库，首先我们需要了解下什么是robots协议。

robots协议也被称作爬虫协议、机器人协议，它的全名叫做`网络爬虫排除标准（Robots Exclusion Protocol）`，同来告诉爬虫和搜索引擎哪些页面可以抓取，哪些不可以抓取。它通常是一个叫做`robots.txt`的文本文件，放在网站的根目录下。

当一个搜索蜘蛛访问一个站点时，它首先会检查下这个站点根目录下是否存在`robots.txt`文件，如果存在，搜索蜘蛛会根据其中定义的爬取范围来爬取。如果没有找到这个文件，那么搜索蜘蛛便会访问所有可直接访问的页面。

下面我们用一个实例感受一下：

```
User-agent: *
Disallow: /
```

如上简单的两行，保存成`robots.txt`文件，放在网站的根目录下，和网站的入口文件放在一起。比如`index.php`、`index.html`、`index.jsp`等等。

那么上面的`User-agent`就描述了搜索蜘蛛的名称，在这里将值设置为`*`，则代表该协议对任何的爬取蜘蛛有效。比如你可以设置`User-agent: Baiduspider`，就代表我们设置的规则对百度搜索引擎是有效的。如果有多条`User-agent`记录，则就会有多个爬取蜘蛛会受到爬取限制，但你至少需要指定一条。如果指定了内容是`*`，那就只能有一条了。

























































